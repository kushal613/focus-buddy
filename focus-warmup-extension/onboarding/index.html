<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Focus Warmup â€“ Setup</title>
    <link rel="stylesheet" href="onboarding.css" />
  </head>
  <body>
    <div class="container">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <!-- Step 1: Welcome -->
      <div class="step active" id="step1">
        <div class="step-content">
          <h1 class="logo">Focus Warmup</h1>
          <h2>Transform scrolling into learning</h2>
          <p class="description">
            When you visit distraction sites, we'll gently redirect your attention to quick study tasks. 
            Each visit becomes a micro-learning opportunity that helps you retain knowledge while gradually reducing mindless browsing.
          </p>
          <div class="illustration">
            <div class="icon-grid">
              <span class="icon">ðŸ“±</span>
              <span class="arrow">â†’</span>
              <span class="icon">ðŸ§ </span>
            </div>
          </div>
          <button class="btn-primary" id="getStartedBtn">Get Started</button>
        </div>
      </div>

      <!-- Step 2: Select Sites -->
      <div class="step" id="step2">
        <div class="step-content">
          <h2>Which sites distract you?</h2>
          <p class="hint">Select the sites where you tend to lose track of time. We'll help you use them more intentionally.</p>
          
          <div class="site-grid">
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="facebook.com" checked />
              <span class="site-name">Facebook</span>
            </label>
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="instagram.com" checked />
              <span class="site-name">Instagram</span>
            </label>
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="tiktok.com" checked />
              <span class="site-name">TikTok</span>
            </label>
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="youtube.com" checked />
              <span class="site-name">YouTube</span>
            </label>
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="twitter.com" />
              <span class="site-name">X (Twitter)</span>
            </label>
            <label class="site-card">
              <input type="checkbox" class="site-check" data-host="reddit.com" />
              <span class="site-name">Reddit</span>
            </label>
          </div>

          <div class="custom-add">
            <input type="text" id="customSite" placeholder="Add another site (e.g., hulu.com)" />
            <button class="btn-secondary" id="addCustomSiteBtn">Add</button>
          </div>

          <ul id="customList"></ul>

          <div class="nav-buttons">
            <button class="btn-text" id="step2Back">Back</button>
            <button class="btn-primary" id="step2Next">Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 3: Study Topics -->
      <div class="step" id="step3">
        <div class="step-content">
          <h2>What are you learning?</h2>
          <p class="hint">Add topics you want to review. We'll generate micro-tasks related to these subjects when you visit distraction sites.</p>
          
          <div class="topic-input-group">
            <input type="text" id="topicInput" placeholder="e.g., Spanish vocabulary, Linear algebra, React hooks" />
            <button class="btn-secondary" id="addTopicBtn">Add Topic</button>
          </div>
          
          <div class="topic-suggestions">
            <p class="micro-hint">Quick add:</p>
            <div class="suggestion-chips">
              <button class="chip" data-topic="Machine Learning">Machine Learning</button>
              <button class="chip" data-topic="Spanish">Spanish</button>
              <button class="chip" data-topic="US History">US History</button>
              <button class="chip" data-topic="Human Anatomy">Human Anatomy</button>
            </div>
          </div>

          <ul id="topicList" class="topic-list"></ul>

          <div class="upload-section">
            <h3>Add Study Materials (Optional)</h3>
            <p class="upload-hint">Upload notes, syllabus, or other documents for more targeted questions.</p>
            
            <div class="upload-row">
              <input type="file" id="onboardingPdfUpload" accept=".pdf,.txt,.docx" style="display: none;" />
              <button id="onboardingUploadBtn" class="btn-outline">ðŸ“„ Upload Document</button>
            </div>
            
            <div class="upload-status" id="onboardingUploadStatus"></div>
            <div class="uploaded-items" id="onboardingUploadedItems"></div>
          </div>

          <div class="nav-buttons">
            <button class="btn-text" id="step3Back">Back</button>
            <button class="btn-primary" id="step3Next">Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 4: Timer Settings -->
      <div class="step" id="step4">
        <div class="step-content">
          <h2>Set your focus rhythm</h2>
          <p class="hint">How long can you browse before a study prompt appears? Start with shorter times to build the habit.</p>
          
          <div class="timer-settings">
            <div class="timer-item">
              <label>
                <span class="timer-label">Initial browse time</span>
                <span class="timer-desc">How long before the first prompt</span>
              </label>
              <div class="timer-control">
                <input type="number" id="startTime" value="5" min="1" max="60" />
                <span class="unit">seconds</span>
              </div>
            </div>

            <div class="timer-item">
              <label>
                <span class="timer-label">Decrease by</span>
                <span class="timer-desc">Each prompt reduces browse time by this amount</span>
              </label>
              <div class="timer-control">
                <input type="number" id="decrementTime" value="1" min="0" max="10" />
                <span class="unit">seconds</span>
              </div>
            </div>
          </div>

          <div class="info-box">
            ðŸ’¡ <strong>Tip:</strong> We're using seconds for quick testing. In real use, you'd set these as minutes.
          </div>

          <div class="nav-buttons">
            <button class="btn-text" id="step4Back">Back</button>
            <button class="btn-primary" id="step4Next">Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 5: Complete -->
      <div class="step" id="step5">
        <div class="step-content">
          <h2>You're all set! ðŸŽ‰</h2>
          <p class="description">
            Focus Warmup is now active. Visit any of your selected distraction sites to see it in action.
          </p>
          
          <div class="summary-box">
            <h3>Your setup:</h3>
            <ul class="summary-list">
              <li><span id="siteCount">0</span> distraction sites monitored</li>
              <li><span id="topicCount">0</span> study topics added</li>
              <li><span id="timerSummary">5</span> second initial timer</li>
            </ul>
          </div>

          <div class="next-steps">
            <p class="micro-hint">What's next?</p>
            <ul class="checklist">
              <li>âœ“ Try visiting one of your distraction sites</li>
              <li>âœ“ Complete a micro-task to continue browsing</li>
              <li>âœ“ Adjust settings anytime from the extension icon</li>
            </ul>
          </div>

          <div class="nav-buttons">
            <button class="btn-text" id="step5Back">Back</button>
            <button class="btn-primary" id="finishBtn">Start Focusing</button>
          </div>
        </div>
      </div>
    </div>

    <script src="../utils/storage.js"></script>
    <script src="onboarding.js"></script>
  </body>
</html>
